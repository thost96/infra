---
name: Linter

permissions:
  actions: write
  checks: none              # add custom pass/fail checks to the PR
  contents: write           # git permissions to repo pull/push and write
  deployments: none
  issues: none              # read/write to repo Issues
  packages: none            # read/write to repo Packages (ghcr, gems, npm)
  pull-requests: none       # read/write to repo PRs
  repository-projects: none
  security-events: none     # read/write to repo Security tab API
  statuses: write           # read/write to repo custom statuses and checks

on:
  push:
    branches: [main]
  pull_request:
    branches: [main]

jobs:
  super-lint:
    name: Run Super Linter
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          ref: ${{ github.head_ref }}
          persist-credentials: false
          fetch-depth: 0

      - name: Prettify code
        uses: creyD/prettier_action@v4.6
        with:
          prettier_options: --write **/*.{json,md,yaml,yml}
          github_token: ${{ secrets.GH_TOKEN }}

      - name: Run Super Linter
        uses: super-linter/super-linter@v8.0.0
        env:
          VALIDATE_ALL_CODEBASE: true
          GITHUB_TOKEN: ${{ secrets.GH_TOKEN }}
